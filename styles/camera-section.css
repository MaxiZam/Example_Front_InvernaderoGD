/* --- camera-section.css --- */

.camera-section {
    gap: var(--spacing-xl); /* Adjusted gap based on previous examples */
    margin: var(--section-gap) auto 0;
    display: grid;
    padding: var(--spacing-xl);
    max-width: var(--content-max-width);
    box-shadow: var(--shadow-level-1);
    background: var(--color-surface);
    border-radius: var(--border-radius-lg);
    /* Grid layout from JSON */
    grid-template-columns: minmax(750px, 1fr) 360px 320px; /* Adjusted minmax */
    grid-template-areas: "main rail";
}

/* Grid Area Assignments */
.main-stream { grid-area: main; display: flex; flex-direction: column; gap: var(--spacing-lg); }
.mosaic { grid-area: mosaic; display: grid; grid-template-columns: 1fr 1fr; grid-auto-rows: min-content; gap: var(--spacing-md); }
.rail { grid-area: rail; display: flex; flex-direction: column; gap: var(--spacing-xl); background-color: var(--color-surface-elevated); padding: var(--spacing-lg); border-radius: var(--border-radius-md); border: 1px solid var(--color-border); }

/* Main Stream */
.stream-main {
    position: relative;
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    aspect-ratio: 16 / 9;
    background-color: #333;
    box-shadow: var(--shadow-level-2);
}
.stream-main video { width: 100%; height: 100%; object-fit: cover; }

.stream-overlay {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    padding: var(--spacing-md);
    background: linear-gradient(to top, hsla(0, 0%, 0%, 0.7) 0%, hsla(0, 0%, 0%, 0) 100%);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    gap: var(--spacing-md);
}
.stream-title h3 { font-size: var(--font-size-base); font-weight: var(--font-weight-medium); margin: 0; }
.stream-data { display: flex; gap: var(--spacing-sm); flex-shrink: 0; }

.data-badge {
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    background-color: var(--color-scrim);
    border-radius: var(--border-radius-full);
    backdrop-filter: blur(2px); /* Add slight blur */
}

.stream-play {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: hsla(0, 0%, 0%, 0.5);
    border: none; border-radius: var(--border-radius-full);
    width: 64px; height: 64px;
    display: flex; align-items: center; justify-content: center;
    color: white; cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.2s ease, transform 0.2s ease;
}
.stream-play:hover { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
.stream-play svg { width: 32px; height: 32px; }

/* Mosaic */
.stream-tile {
    position: relative;
    border-radius: var(--border-radius-md);
    overflow: hidden;
    aspect-ratio: 4 / 3;
    cursor: pointer;
    box-shadow: var(--shadow-level-1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 2px solid transparent;
}
.stream-tile img { width: 100%; height: 100%; object-fit: cover; }
.stream-tile:hover { transform: scale(1.03); box-shadow: var(--shadow-level-2); }
.stream-tile[aria-pressed="true"] { border-color: var(--color-primary); box-shadow: 0 0 8px hsla(152, 70%, 30%, 0.5); }

.tile-label {
    position: absolute; bottom: 0; left: 0; right: 0;
    padding: var(--spacing-sm);
    background: linear-gradient(to top, hsla(0, 0%, 0%, 0.6) 0%, hsla(0, 0%, 0%, 0) 100%);
    color: white;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    text-align: center;
    transition: background-color 0.2s ease;
}
.stream-tile:hover .tile-label {
    background: linear-gradient(to top, hsla(0, 0%, 0%, 0.8) 0%, hsla(0, 0%, 0%, 0) 100%);
}


/* Rail */
.rail-controls, .rail-alerts, .rail-timeline { display: flex; flex-direction: column; gap: var(--spacing-md); }

.rail-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
    margin-bottom: var(--spacing-xs); /* Add margin below title */
}

.rail-controls .btn { width: 100%; font-size: var(--font-size-sm); }

.rail-alerts .alert-item { /* Re-use alert-item styles but specific context */
    display: flex; align-items: center; gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-sm);
    border-radius: var(--border-radius-md);
}
.rail-alerts .alert-item svg { width: 16px; height: 16px; flex-shrink: 0; }
.alert-item--warning { background-color: #fffbeb; color: var(--status-warning); }
/* Add other status backgrounds/colors */

.timeline-events { display: flex; flex-direction: column; gap: var(--spacing-sm); max-height: 150px; overflow-y: auto; }

.timeline-event { display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-xs); color: var(--text-muted); }
.timeline-event svg { width: 12px; height: 12px; flex-shrink: 0; }


/* --- Responsive Adjustments --- */
@media (max-width: 1100px) { /* Adjusted breakpoint */
    .camera-section {
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
            "main mosaic"
            "rail rail";
    }
    .rail { flex-direction: row; flex-wrap: wrap; justify-content: space-between; }
    .rail-controls, .rail-alerts, .rail-timeline { flex-basis: calc(33.33% - var(--spacing-lg)); min-width: 160px; }
}

@media (max-width: 767px) {
    .camera-section {
        grid-template-columns: 1fr;
        grid-template-areas: "main" "mosaic" "rail";
    }
    .mosaic { grid-template-columns: 1fr 1fr; } /* Keep 2 columns if space allows */
    .rail { flex-direction: column; }
    .rail-controls, .rail-alerts, .rail-timeline { flex-basis: auto; }
}

@media (max-width: 479px) {
    .camera-section { padding: var(--spacing-lg); }
    .stream-overlay { flex-direction: column; align-items: flex-start; }
    .mosaic { grid-template-columns: 1fr; } /* Stack tiles */
    .stream-tile { aspect-ratio: 16 / 9; }
    .rail-controls, .rail-alerts, .rail-timeline { min-width: unset; }
}